<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<title>Vad ska jag prata om?!</title>
		<meta
			name="description"
			content="Visst är det väl en jävla pina att alltid komma på något att prata om? Låt oss fixa det. Här får du exempel på saker som ni kan prata om."
		/>
		<meta name="theme-color" content="#0d1117" />
		<meta name="author" content="Fredrik Hoffmann mrhoffmann@github.com" />
		<?xml version="1.0" ?>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="css.css">
	</head>

	<body>
		<span>Inget på denna sida får tas på allvar. "visste du" kan vara utdaterat.</span>
		<h1 id="container" onclick="copy()"></h1>
		<div id="unsafe_container"><input type="checkbox" id="unsafe" onclick="unsafe_check(this)"></input><label for="unsafe" id="unsafe_text">Inkludera känsligare frågor</label></div>
		<div id="input-wrapper">
			<input type="text" id="filter" autocomplete="off" placeholder="Sök"><span id="clear_search" onclick="clearSearch()">clear</span></input>
		</div>
		<div id="links">
			<a href="" id="link"></a>
		</div>
		<div id="buttons">
			<div id="wrapper">
				<button
					onclick="questions.decrement()"
					id="prev"
					aria-label="Förra"
					title="Förra"
				>
					<
				</button>
				<button
					onclick="questions.randomize()"
					id="rand"
					aria-label="Slumpa"
					title="Slumpa"
				></button>
				<button
					onclick="questions.increment()"
					id="next"
					aria-label="Nästa"
					title="Nästa"
				>
					>
				</button>
			</div>
		</div>

		<script src="js.js"></script>
		<script>
			const questions = new Selected();
			const originalTopics = questions.topics;
			
			const copy = () => {
				const textarea = document.createElement('textarea');
				textarea.value = document.getElementById('container').innerText;
				document.body.appendChild(textarea);
				textarea.select();

				try {
					document.execCommand('copy');
					questions.sendNotification('Kopierat.');
				} catch {
					//naj
				}
				document.body.removeChild(textarea);
			};

			const unsafe_check = (event) => {
				questions.topics = event.checked ? originalTopics.concat(questions.sensitive_topis) : originalTopics;
				questions.nsfw = event.checked;
				if(event.checked){
					if(!questions.searching)
					{
						questions.counter = originalTopics.length + 1;
					}
				}
				if(!questions.searching){
					questions.randomize();
				}
				else{
					questions.doFilterSearch(questions.searchWord);
				}
				questions.updateDisplay();
			}

			const clearSearch = () => {
				document.getElementById('filter').value = "";
				questions.doFilterSearch("");
			}

			questions.initializeComponent();
		</script>
	</body>
</html>
